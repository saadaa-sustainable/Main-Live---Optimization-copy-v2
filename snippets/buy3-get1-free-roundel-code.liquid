{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Category Carousels – Roundels, Smart Arrows</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>







/* ——— Offer strip ABOVE image ——— */
.pc-offer-strip{
  display:block;
  width:100%;
  position:relative;          /* for the shine */
  padding:4px 8px;
  text-align:center;
  font-size:8px;
  font-weight:600;
  letter-spacing:.4px;
  text-transform:uppercase;
  color:#111;
  background: linear-gradient(to bottom, #fff36b 0%, #ffdb00 100%);
  border: 1px solid rgba(0,0,0,.18);
  border-bottom: none;        /* merges with image below */
  
  box-shadow: 0 4px 14px rgba(0,0,0,.12);
  overflow:hidden;            /* clip shine */
  isolation:isolate;
}

/* Shine only inside the strip */
.pc-offer-strip::after{
  content:"";
  position:absolute; top:0; bottom:0; left:-130%;
  width:120%;
  background: linear-gradient(
    115deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0) 32%,
    rgba(255,255,255,.65) 48%,
    rgba(255,255,255,0) 64%,
    rgba(255,255,255,0) 100%
  );
  transform:skewX(-20deg);
  animation:badgeShine 2.2s linear infinite;
  pointer-events:none;
}

@keyframes badgeShine{
  0%   { left:-130%; }
  100% { left:130%; }
}

@media (min-width:701px){
  .pc-offer-strip{ font-size:12px; padding:8px 12px; }
}
@media (prefers-reduced-motion: reduce){
  .pc-offer-strip::after{ animation:none; }
}





    :root{ --sticky-offset: 120px; }

    /* ——— ROUNDels (sticky) ——— */
    #sticky-roundels{
      position: sticky; top: 76px; z-index: 3; background: #f6f3f1;
      padding: 10px 0; border-bottom: 1px solid rgba(0,0,0,.06);
    }
    .roundel-row{
      display:flex; gap:10px; align-items:center; justify-content:center;
      overflow-x:auto; -webkit-overflow-scrolling:touch; padding: 2px 10px;
      scroll-snap-type:x mandatory;
    }
    .roundel-row::-webkit-scrollbar{ display:none; }

    .category-item{
      display:flex; flex-direction:column; align-items:center; cursor:pointer;
      flex:0 0 auto; scroll-snap-align:center; text-decoration:none; color:inherit;
    }
    .category-image-wrapper{
      position:relative; display:inline-block; padding:2px;
      border:2px solid transparent; border-radius:50%; transition:border .2s;
     
    }
    .category-image{
             width: 88px;
    height: 88px; object-fit:cover; border-radius:50%; display:block;
    }
    .category-check{
      display:none; position:absolute; bottom:4px; right: 1px;
    width: 16px;
    height: 16px;
      background:#C36A4E; border-radius:50%; padding:2px; border:1px solid #fff;
    }

    /* ▼ updated: 2-line labels */
    .category-label{
      margin-top:.45rem;
      font-size:.8rem;
      color:#444;
      font-weight:600;
      text-align:center;
      line-height:1.15;
      display:flex;                /* stack the two lines */
      flex-direction:column;
      align-items:center;
      min-height:2.4em;            /* room for 2 lines */
      white-space:normal;
    }
    .category-label .label-line{ display:block; }

    /* input radios only for styling “checked” */
    .roundel-row input[type="radio"]{ display:none; }
    .roundel-row input[type="radio"]:checked + .category-image-wrapper{
      border-color:#C36A4E;
    }
    .roundel-row input[type="radio"]:checked + .category-image-wrapper .category-check{
      display:block;
    }
    .roundel-row input[type="radio"]:checked ~ .category-label{ color:#C36A4E; }

    @media (max-width:700px){
      .roundel-row{ justify-content:center; }
      .category-image{ width:16vw; height:16vw; }
      .category-label{ font-size:.58rem; }
    }

    /* ——— Category Heading ——— */
    .banner-row{ scroll-margin-top: calc(var(--sticky-offset) + 8px); }
    .banner-text{
      display:block; width:100%; background:#f6f3f1; color:#222;
      padding: 6px 14px; font-size:20px; font-weight:700; letter-spacing:.2px;
    }
    @media (min-width:701px){ .banner-text{ font-size:18px; padding:14px 16px; } }

    /* ——— Card look ——— */
    .pc-product-image-wrapper { position: relative; width: 100%; overflow: hidden; height: auto; }
    .pc-product-image-wrapper img { display: block; width: 100%; height: auto; }
    .pc-grid-item { overflow: hidden; display: flex; flex-direction: column; cursor: pointer; transition: box-shadow .2s; }
    .pc-save-pill{ position: absolute; left: 6px; top: 5px; z-index: 0; background: #209020; color: #fff; padding: 0px 5px; border-radius: 4px; font-size: 10px; font-weight: 800; letter-spacing: .3px; box-shadow: 0 2px 6px rgba(0,0,0,.12); text-transform: uppercase; display:none; }

    .pc-product-title { padding: 8px 10px 10px; font-size: 10px; line-height: 1.3; color: #000;
      -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; min-height: 2.6em; font-weight: 500; }
    @media (min-width:701px){ .pc-product-title{ font-size:15px; letter-spacing:.5px; } }

    .pc-product-price{ padding:0; font-size:12px; line-height:1.2; color:#111; font-weight:700; }
    @media (min-width:701px){ .pc-product-price{ font-size:14px; } }

    .pc-grid-section{ padding:0 0 2rem 0; background:#f6f3f1; }
    .pc-grid-outer{ position:relative; top:7px; }

    /* ——— Vanilla product carousel ——— */
    .pc-carousel{ position:relative; }
    .pc-carousel-track{
      display:flex; gap:8px; padding:0 10px; margin:0; overflow-x:auto; -webkit-overflow-scrolling:touch;
      scroll-snap-type:x mandatory; scroll-behavior:smooth; margin-left:14px;
    }
    .pc-carousel-track::-webkit-scrollbar{ height:6px; }
    .pc-carousel-track::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.15); border-radius:4px; }
    .pc-carousel-item{ flex:0 0 39%; scroll-snap-align:start; }
    @media (min-width:701px){
      .pc-carousel-track{ gap:12px; padding:0 16px; }
      .pc-carousel-item{ flex:0 0 15.5%; } /* ~6 per view desktop */
    }

    /* ——— Arrows (hidden on mobile, smart hide on edges) ——— */
    .pc-nav-btn{
      position:absolute; top:40%; transform:translateY(-50%); background:#fff; border:1px solid rgba(0,0,0,.12);
      border-radius:50%; width:36px; height:36px; display:grid; place-items:center; cursor:pointer;
      box-shadow:0 3px 12px rgba(0,0,0,.10); z-index:2; transition:opacity .18s;
    }
    .pc-nav-prev{ left:6px; }
    .pc-nav-next{ right:6px; }
    .pc-nav-btn.is-hidden{ opacity:0; pointer-events:none; }
    @media (max-width:700px){ .pc-nav-btn{ display:none; } }

    /* Utils */
    .pc-grid-empty { padding:2em;text-align:center;color:#b08065;font-size:13px; }
    body{ padding-bottom:0; }
    a.pc-grid-link { text-decoration:none; color:inherit; display:block; }

    /* ——— Price row with red slashed compare (2×) ——— */
    .pc-price-row{ display:flex; align-items:baseline; padding:0 10px 10px; gap:8px; justify-content:center; }
    .pc-product-compare{ font-size:12px; line-height:1.2; color:#e01e37; text-decoration:line-through; font-weight:700; opacity:.95; }
    @media (min-width:701px){ .pc-product-compare{ font-size:14px; } }
  </style>
</head>
<body>

  <!-- ROUNDels (sticky) -->
  <div id="sticky-roundels" aria-label="Category roundels">
    <div class="roundel-row" role="tablist" aria-label="Shop by category">



   <!-- Roundel 1 -->
      <label class="category-item" data-cat="women-topwear" role="tab" aria-selected="true">
        <input type="radio" name="cat" checked/>
        <span class="category-image-wrapper">
          <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/Group_-_2025-10-01T203008.586.webp?v=1759330830" alt="Women Topwear">
          <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        </span>
        <span class="category-label">
          <span class="label-line">Women</span>
          <span class="label-line">Topwear</span>
        </span>
      </label>



      <!-- Roundel 2 -->
      <label class="category-item" data-cat="women-bottomwear" role="tab" aria-selected="false">
        <input type="radio" name="cat" />
        <span class="category-image-wrapper">
          <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/Group_21_1dbb98c8-d1a2-47d9-bef3-b76bc051205b.webp?v=1751623815" alt="Women Bottomwear">
          <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        </span>
        <!-- ▼ updated: 2-line label -->
        <span class="category-label">
          <span class="label-line">Women</span>
          <span class="label-line">Bottomwear</span>
        </span>
      </label>


          <!-- Roundel 4 -->
      <label class="category-item" data-cat="men-topwear" role="tab" aria-selected="false">
        <input type="radio" name="cat" />
        <span class="category-image-wrapper">
          <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/Group_-_2025-10-01T203006.904.webp?v=1759330831" alt="Men Topwear">
          <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        </span>
        <span class="category-label">
          <span class="label-line">Men</span>
          <span class="label-line">Topwear</span>
        </span>
      </label>

   

      <!-- Roundel 3 -->
      <label class="category-item" data-cat="men-bottomwear" role="tab" aria-selected="false">
        <input type="radio" name="cat" />
        <span class="category-image-wrapper">
          <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/Group_87_57e1a6bf-6ae8-4a56-8cbc-f6cec1892fe9.webp?v=1756384467" alt="Men Bottomwear">
          <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        </span>
        <span class="category-label">
          <span class="label-line">Men</span>
          <span class="label-line">Bottomwear</span>
        </span>
      </label>

  
    </div>
  </div>


  <!-- SECTION: Women Topwear (9 cards) -->
  <div class="banner-row" id="women-topwear-banner"><span class="banner-text">Women Topwear</span></div>
  <div class="pc-grid-section">
    <div class="pc-grid-outer">
      <div class="pc-carousel" data-carousel="women-topwear">
        <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
        <div class="pc-carousel-track"></div>
        <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
      </div>
    </div>
  </div>




  <!-- SECTION: Women Bottomwear (7 cards) -->
  <div class="banner-row" id="women-bottomwear-banner"><span class="banner-text">Women Bottomwear</span></div>
  <div class="pc-grid-section">
    <div class="pc-grid-outer">
      <div class="pc-carousel" data-carousel="women-bottomwear">
        <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
        <div class="pc-carousel-track"></div>
        <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
      </div>
    </div>
  </div>


    <!-- SECTION: Men Topwear -->
  <div class="banner-row" id="men-topwear-banner"><span class="banner-text">Men Topwear</span></div>
  <div class="pc-grid-section">
    <div class="pc-grid-outer">
      <div class="pc-carousel" data-carousel="men-topwear">
        <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
        <div class="pc-carousel-track"></div>
        <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
      </div>
    </div>
  </div>


  <!-- SECTION: Men Bottomwear -->
  <div class="banner-row" id="men-bottomwear-banner"><span class="banner-text">Men Bottomwear</span></div>
  <div class="pc-grid-section">
    <div class="pc-grid-outer">
      <div class="pc-carousel" data-carousel="men-bottomwear">
        <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
        <div class="pc-carousel-track"></div>
        <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
      </div>
    </div>
  </div>



<script>
  /* ——— DATA (unchanged): fill with your products ——— */
  const DATA = {
    'women-bottomwear': [
     {link:'https://saadaa.in/products/black-solid-regular-fit-cotton-trouser', image:'https://saadaa.in/cdn/shop/files/1_3d5f7f38-fdfb-4dc9-b2e5-6d809faf345c_1.webp?v=1757741992&width=1000', title:'Everyday Cotton Pant', price:799},
      {link:'https://saadaa.in/products/women-english-blue-airy-linen-wide-leg-pant', image:'https://saadaa.in/cdn/shop/files/1_dd5f6154-d0b8-4774-a5e9-4289ba028df0.webp?v=1755861078&width=1000', title:'Airy Linen Wide Leg Pants', price:999},
      {link:'https://saadaa.in/products/rose-taupe-airy-linen-straight-pants', image:'https://saadaa.in/cdn/shop/files/1_8fe69233-839a-4637-a4c8-eb7e9774d526.webp?v=1753104766&width=1000', title:'Airy Linen Straight Pants', price:1199},
      {link:'https://saadaa.in/products/women-beige-straight-fit-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_45906f39-0ba0-4653-9809-1a3b2ac5b3c3.webp?v=1759750482&width=1000', title:'Cotton Straight Pant', price:799},
      {link:'https://saadaa.in/products/beige-wide-leg-pants-1', image:'https://saadaa.in/cdn/shop/files/1_216d766a-d9eb-4cfb-ab35-741997240c47.webp?v=1757913797&width=1000', title:'Wide Leg Pants', price:1999},
      {link:'https://saadaa.in/products/olive-green-straight-fit-formal-pants', image:'https://saadaa.in/cdn/shop/files/1_abdd4223-0dc6-4a44-8e2a-a1e250413f32.webp?v=1756454336&width=1000', title:'Straight Fit Formal Pants', price:1599},
      {link:'https://saadaa.in/products/navy-blue-viscose-palazzo-pant', image:'https://saadaa.in/cdn/shop/files/1_a8fafbd9-a1ec-4372-89fb-ef2d7c682d3d.webp?v=1757756440&width=1000', title:'Viscose Palazzo Pant', price:799},
      
    ],
    'women-topwear': [
      
      {link:'https://saadaa.in/products/maroon-airy-linen-long-kurta', image:'https://saadaa.in/cdn/shop/files/1_f00be7bb-12ae-4b25-9e40-4fef08cfcd97.webp?v=1759922095&width=1000', title:'Airy Linen Long Kurta', price:999},
      {link:'https://saadaa.in/products/women-ecru-airy-linen-mid-thigh-length-kurta', image:'https://saadaa.in/cdn/shop/files/6_0411bd68-d8b8-4b2a-bacf-023a9a93a3ec.webp?v=1759746257&width=1000', title:'Airy Linen Mid Thigh Length Kurta', price:999},
      {link:'https://saadaa.in/products/lilac-airy-linen-short-kurta', image:'https://saadaa.in/cdn/shop/files/1_6a8d46a5-0396-4efa-9438-04fd57d521fc.webp?v=1757745849&width=1000', title:'Airy Linen Short Kurta', price:799},
      {link:'https://saadaa.in/products/women-light-pink-100-linen-notch-collar-shirt', image:'https://saadaa.in/cdn/shop/files/1.1_5712a4f1-ee82-477e-acef-14583c4d2268.webp?v=1759310179&width=1000', title:'Pure Linen Notch Collar Shirts', price:2199},
      {link:'https://saadaa.in/products/women-white-airy-linen-split-neck-short-kurta', image:'https://saadaa.in/cdn/shop/files/1.1_42c6e8c0-b909-4d8e-b387-04152085cf56.webp?v=1759576985&width=1000', title:'Airy Linen Split Neck Short Kurta', price:699},
      {link:'https://saadaa.in/products/women-light-blue-100-linen-shirt', image:'https://saadaa.in/cdn/shop/files/1.2_c096de3f-a995-41ad-abec-a2fca653ae6d.webp?v=1759346577&width=1000', title:'Pure Linen Shirts', price:2499},
      {link:'https://saadaa.in/products/women-salmon-pink-airy-linen-shirt', image:'https://saadaa.in/cdn/shop/files/1_6b146cb1-2215-49ce-b25d-470f1d2f2f38.webp?v=1755860826&width=1000', title:'Airy-Linen Shirt', price:1199},
      {link:'https://saadaa.in/products/navy-blue-viscose-pleated-top', image:'https://saadaa.in/cdn/shop/files/1_e4abc390-453a-45c1-a6c4-b42b1ea4379a.webp?v=1757917562&width=1000', title:'Viscose Pleated Tops', price:1299},
      {link:'https://saadaa.in/products/rose-v-neck-sleeveless-top', image:'https://saadaa.in/cdn/shop/files/1_b2a6d7e9-99f2-4f4f-acab-54ec210cf493.webp?v=1757758235&width=1000', title:'V-Neck Sleeveless Tops', price:799},
    ],
    'men-bottomwear': [
      {link:'https://saadaa.in/products/men-white-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_a79455d6-38bc-48be-9d92-052b9a2396b0.webp?v=1756386028&width=1000', title:'White Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-black-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_910ab6fa-26d1-4e11-a1f2-634ed850de75.webp?v=1756386028&width=1000', title:'Black Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-beige-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_751a33a9-f87e-4691-8d40-fe3499583054.webp?v=1756210083&width=1000', title:'Beige Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-grey-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_f1b4a53d-88cc-4d3b-996f-f7dc74925dc9.jpg?v=1756386028&width=1000', title:'Grey Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-navy-blue-cotton-pant', image:'https://saadaa.in/cdn/shop/files/3_b20991bd-2394-4618-a2a2-39bd7bbcf7cb.webp?v=1756386028&width=1000', title:'Navy Blue Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-coffee-brown-cotton-pant', image:'https://saadaa.in/cdn/shop/files/SMCP_CB5.webp?v=1759747007&width=1000', title:'Coffee Brown Cotton Pant', price:899},
    ],
    'men-topwear': [
      {link:'https://saadaa.in/products/men-taupe-full-sleeve-linen-shirt', image:'https://saadaa.in/cdn/shop/files/1.1_f512c477-b93c-448b-8b02-a95663fd10bf.webp?v=1759309308&width=1000', title:'Pure Linen Full Sleeve Shirt', price:2499},
      {link:'https://saadaa.in/products/sky-blue-airy-linen-long-kurta-1', image:'https://saadaa.in/cdn/shop/files/1_bf5678f4-df7c-4659-be1e-91cb363717e7.webp?v=1756473416&width=1000', title:'Airy Linen Long Kurta', price:1299},
      {link:'https://saadaa.in/products/ecru-airy-linen-short-kurta-1', image:'https://saadaa.in/cdn/shop/files/1.1_7d6ccaa9-1ee0-4f82-9dea-58b4c881727e.webp?v=1756471222&width=1000', title:'Airy Linen Short Kurta', price:999},
      {link:'https://saadaa.in/products/men-light-blue-linen-half-sleeve-shirt', image:'https://saadaa.in/cdn/shop/files/1.1_3a9c5729-966c-4ce2-a758-b5f8350335f7.webp?v=1759308874&width=1000', title:'Pure Linen Short Sleeve Shirt', price:2199},
    ],
  };

  const inr = new Intl.NumberFormat('en-IN', { maximumFractionDigits: 0 });

  function escapeHtml(str = "") {
    return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");
  }

  /* Sticky offset for precise scroll-to */
  function computeStickyOffset(){
    const sticky = document.getElementById('sticky-roundels');
    const stickyH = sticky ? sticky.getBoundingClientRect().height : 0;
    const candidates = document.querySelectorAll('header, .site-header, .shopify-section-header-sticky, .announcement-bar');
    let topFixed = 0;
    candidates.forEach(el => {
      const cs = getComputedStyle(el);
      if ((cs.position === 'fixed' || cs.position === 'sticky')) {
        const rect = el.getBoundingClientRect();
        if (rect.top <= 1) topFixed += rect.height;
      }
    });
    const total = Math.round(stickyH + topFixed + 12);
    document.documentElement.style.setProperty('--sticky-offset', total + 'px');
  }
  function getStickyOffsetPx(){
    const v = getComputedStyle(document.documentElement).getPropertyValue('--sticky-offset') || '0';
    return parseInt(v, 10) || 0;
  }

 function buildCardHTML(item){
  const img = item.image || '';
  const title = escapeHtml(item.title || '');
  const priceNum = Number(item.price);
  const rupees = Number.isFinite(priceNum) ? inr.format(Math.round(priceNum)) : '';
  const compare = Number.isFinite(priceNum) ? inr.format(Math.round(priceNum * 2)) : '';
  const link = item.link || '#';
  return `
    <a class="pc-grid-link" href="${escapeHtml(link)}">
      <div class="pc-grid-item">
        <div class="pc-product-image-wrapper">
          <div class="pc-offer-strip" aria-label="Buy three, get one free">BUY 3 GET 1 FREE</div>
          <img src="${img}" alt="${title}" loading="lazy" />
        </div>
        <div class="pc-product-title">${title}</div>
        <div class="pc-price-row">
          <div class="pc-product-price">₹${rupees}</div>
          <div class="pc-product-compare">₹${compare}</div>
        </div>
      </div>
    </a>
  `;
}



  function renderCarousel(name){
    const wrapper = document.querySelector(`.pc-carousel[data-carousel="${name}"]`);
    if(!wrapper) return;
    const track = wrapper.querySelector('.pc-carousel-track');
    const items = DATA[name] || [];
    track.innerHTML = items.length
      ? items.map(buildCardHTML).map(html => `<div class="pc-carousel-item">${html}</div>`).join('')
      : `<div class="pc-grid-empty" style="width:100%;">No products yet.</div>`;
  }

  /* Smart arrow visibility */
  function attachCarouselNav(){
    document.querySelectorAll('.pc-carousel').forEach(carousel => {
      const track = carousel.querySelector('.pc-carousel-track');
      const prev = carousel.querySelector('.pc-nav-prev');
      const next = carousel.querySelector('.pc-nav-next');

      prev.classList.add('is-hidden');

      const updateArrows = () => {
        const max = Math.max(0, track.scrollWidth - track.clientWidth);
        const x = Math.round(track.scrollLeft);
        if (x > 0) prev.classList.remove('is-hidden'); else prev.classList.add('is-hidden');
        if (x >= max - 2) next.classList.add('is-hidden'); else next.classList.remove('is-hidden');
      };

      const scrollAmount = () => Math.max(track.clientWidth * 0.9, 320);

      prev.addEventListener('click', () => track.scrollBy({ left: -scrollAmount(), behavior: 'smooth' }));
      next.addEventListener('click', () => track.scrollBy({ left:  scrollAmount(), behavior: 'smooth' }));

      track.addEventListener('scroll', updateArrows, { passive: true });
      setTimeout(updateArrows, 0);
      window.addEventListener('resize', updateArrows);
    });
  }

  /* ——— Roundel behavior: scroll to section & highlight ——— */
  function scrollToCategory(cat){
    const el = document.getElementById(`${cat}-banner`);
    if(!el) return;
    const rect = el.getBoundingClientRect();
    const absoluteTop = rect.top + window.pageYOffset;
    window.scrollTo({ top: Math.max(absoluteTop - getStickyOffsetPx(), 0), behavior: 'smooth' });
  }

  function setActiveRoundel(cat){
    document.querySelectorAll('#sticky-roundels .category-item').forEach(lbl => {
      const isActive = lbl.getAttribute('data-cat') === cat;
      const radio = lbl.querySelector('input[type="radio"]');
      const selected = isActive ? 'true' : 'false';
      lbl.setAttribute('aria-selected', selected);
      if (radio) radio.checked = isActive;
    });
  }

  let manualLockUntil = 0;
  const nowMs = () => (typeof performance !== 'undefined' && performance.now) ? performance.now() : Date.now();

  function onRoundelClick(e){
    const cat = e.currentTarget.getAttribute('data-cat');
    manualLockUntil = nowMs() + 800;
    setActiveRoundel(cat);
    scrollToCategory(cat);
    setTimeout(syncActiveOnScroll, 850);
  }




  function syncActiveOnScroll(){
    if (nowMs() < manualLockUntil) return;
    const keys = ['women-topwear','women-bottomwear','men-topwear','men-bottomwear'];
    const banners = keys.map(k => document.getElementById(`${k}-banner`)).filter(Boolean);
    const offset = getStickyOffsetPx();
    const hysteresis = 6;
    const idx = banners.findIndex(h => (h.getBoundingClientRect().top - offset) > hysteresis);
    let currentIdx;
    if (idx === -1) currentIdx = banners.length - 1;
    else if (idx === 0) currentIdx = 0;
    else currentIdx = idx - 1;
    const cat = banners[currentIdx].id.replace('-banner','');
    setActiveRoundel(cat);
  }

  document.addEventListener('DOMContentLoaded', () => {
    computeStickyOffset();

    // Render carousels
    ['women-topwear','women-bottomwear','men-topwear','men-bottomwear'].forEach(renderCarousel);

    attachCarouselNav();

    // Roundel clicks
    document.querySelectorAll('#sticky-roundels .category-item').forEach(lbl => {
      lbl.addEventListener('click', onRoundelClick);
    });

    // Scroll sync
    window.addEventListener('scroll', syncActiveOnScroll, { passive: true });
    window.addEventListener('resize', () => { computeStickyOffset(); syncActiveOnScroll(); });

    syncActiveOnScroll();
  });
</script>

</body> {% endcomment %}





{% comment %} NEW CODE WITH WINTER WEAR ADDITION START {% endcomment %}




<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Category Carousels – Roundels, Smart Arrows</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>







/* ——— Offer strip ABOVE image ——— */
.pc-offer-strip{
  display:block;
  width:100%;
  position:relative;          /* for the shine */
  padding:4px 8px;
  text-align:center;
  font-size:8px;
  font-weight:600;
  letter-spacing:.4px;
  text-transform:uppercase;
  color:#111;
  background: linear-gradient(to bottom, #fff36b 0%, #ffdb00 100%);
  border: 1px solid rgba(0,0,0,.18);
  border-bottom: none;        /* merges with image below */
  
  box-shadow: 0 4px 14px rgba(0,0,0,.12);
  overflow:hidden;            /* clip shine */
  isolation:isolate;
}

/* Shine only inside the strip */
.pc-offer-strip::after{
  content:"";
  position:absolute; top:0; bottom:0; left:-130%;
  width:120%;
  background: linear-gradient(
    115deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0) 32%,
    rgba(255,255,255,.65) 48%,
    rgba(255,255,255,0) 64%,
    rgba(255,255,255,0) 100%
  );
  transform:skewX(-20deg);
  animation:badgeShine 2.2s linear infinite;
  pointer-events:none;
}

@keyframes badgeShine{
  0%   { left:-130%; }
  100% { left:130%; }
}

@media (min-width:701px){
  .pc-offer-strip{ font-size:12px; padding:8px 12px; }
}
@media (prefers-reduced-motion: reduce){
  .pc-offer-strip::after{ animation:none; }
}





    :root{ --sticky-offset: 120px; }

    /* ——— ROUNDels (sticky) ——— */
    #sticky-roundels{
      position: sticky; top: 76px; z-index: 3; background: #f6f3f1;
      padding: 10px 0; border-bottom: 1px solid rgba(0,0,0,.06);
    }
    .roundel-row{
      display:flex; gap:10px; align-items:center; justify-content:center;
      overflow-x:auto; -webkit-overflow-scrolling:touch; padding: 2px 10px;
      scroll-snap-type:x mandatory;
    }
    .roundel-row::-webkit-scrollbar{ display:none; }

    .category-item{
      display:flex; flex-direction:column; align-items:center; cursor:pointer;
      flex:0 0 auto; scroll-snap-align:center; text-decoration:none; color:inherit;
    }
    .category-image-wrapper{
      position:relative; display:inline-block; padding:2px;
      border:2px solid transparent; border-radius:50%; transition:border .2s;
     
    }
    .category-image{
             width: 88px;
    height: 88px; object-fit:cover; border-radius:50%; display:block;
    }
    .category-check{
      display:none; position:absolute; bottom:4px; right: 1px;
    width: 16px;
    height: 16px;
      background:#C36A4E; border-radius:50%; padding:2px; border:1px solid #fff;
    }

    /* ▼ updated: 2-line labels */
    .category-label{
      margin-top:.45rem;
      font-size:.8rem;
      color:#444;
      font-weight:600;
      text-align:center;
      line-height:1.15;
      display:flex;                /* stack the two lines */
      flex-direction:column;
      align-items:center;
      min-height:2.4em;            /* room for 2 lines */
      white-space:normal;
    }
    .category-label .label-line{ display:block; }

    /* input radios only for styling “checked” */
    .roundel-row input[type="radio"]{ display:none; }
    .roundel-row input[type="radio"]:checked + .category-image-wrapper{
      border-color:#C36A4E;
    }
    .roundel-row input[type="radio"]:checked + .category-image-wrapper .category-check{
      display:block;
    }
    .roundel-row input[type="radio"]:checked ~ .category-label{ color:#C36A4E; }

    @media (max-width:700px){
      .roundel-row{ justify-content:flex-start; }
      .category-image{ width:16vw; height:16vw; }
      .category-label{ font-size:.58rem; }
    }

    /* ——— Category Heading ——— */
    .banner-row{ scroll-margin-top: calc(var(--sticky-offset) + 8px); }
    .banner-text{
      display:block; width:100%; background:#f6f3f1; color:#222;
      padding: 6px 14px; font-size:20px; font-weight:700; letter-spacing:.2px;
    }
    @media (min-width:701px){ .banner-text{ font-size:18px; padding:14px 16px; } }

    /* ——— Card look ——— */
    .pc-product-image-wrapper { position: relative; width: 100%; overflow: hidden; height: auto; }
    .pc-product-image-wrapper img { display: block; width: 100%; height: auto; }
    .pc-grid-item { overflow: hidden; display: flex; flex-direction: column; cursor: pointer; transition: box-shadow .2s; }
    .pc-save-pill{ position: absolute; left: 6px; top: 5px; z-index: 0; background: #209020; color: #fff; padding: 0px 5px; border-radius: 4px; font-size: 10px; font-weight: 800; letter-spacing: .3px; box-shadow: 0 2px 6px rgba(0,0,0,.12); text-transform: uppercase; display:none; }

    .pc-product-title { padding: 8px 10px 10px; font-size: 10px; line-height: 1.3; color: #000;
      -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; min-height: 2.6em; font-weight: 500; }
    @media (min-width:701px){ .pc-product-title{ font-size:15px; letter-spacing:.5px; } }

    .pc-product-price{ padding:0; font-size:12px; line-height:1.2; color:#111; font-weight:700; }
    @media (min-width:701px){ .pc-product-price{ font-size:14px; } }

    .pc-grid-section{ padding:0 0 2rem 0; background:#f6f3f1; }
    .pc-grid-outer{ position:relative; top:7px; }

    /* ——— Vanilla product carousel ——— */
    .pc-carousel{ position:relative; }
    .pc-carousel-track{
      display:flex; gap:8px; padding:0 10px; margin:0; overflow-x:auto; -webkit-overflow-scrolling:touch;
      scroll-snap-type:x mandatory; scroll-behavior:smooth; margin-left:14px;
    }
    .pc-carousel-track::-webkit-scrollbar{ height:6px; }
    .pc-carousel-track::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.15); border-radius:4px; }
    .pc-carousel-item{ flex:0 0 39%; scroll-snap-align:start; }
    @media (min-width:701px){
      .pc-carousel-track{ gap:12px; padding:0 16px; }
      .pc-carousel-item{ flex:0 0 15.5%; } /* ~6 per view desktop */
    }

    /* ——— Arrows (hidden on mobile, smart hide on edges) ——— */
    .pc-nav-btn{
      position:absolute; top:40%; transform:translateY(-50%); background:#fff; border:1px solid rgba(0,0,0,.12);
      border-radius:50%; width:36px; height:36px; display:grid; place-items:center; cursor:pointer;
      box-shadow:0 3px 12px rgba(0,0,0,.10); z-index:2; transition:opacity .18s;
    }
    .pc-nav-prev{ left:6px; }
    .pc-nav-next{ right:6px; }
    .pc-nav-btn.is-hidden{ opacity:0; pointer-events:none; }
    @media (max-width:700px){ .pc-nav-btn{ display:none; } }

    /* Utils */
    .pc-grid-empty { padding:2em;text-align:center;color:#b08065;font-size:13px; }
    body{ padding-bottom:0; }
    a.pc-grid-link { text-decoration:none; color:inherit; display:block; }

    /* ——— Price row with red slashed compare (2×) ——— */
    .pc-price-row{ display:flex; align-items:baseline; padding:0 10px 10px; gap:8px; justify-content:center; }
    .pc-product-compare{ font-size:12px; line-height:1.2; color:#e01e37; text-decoration:line-through; font-weight:700; opacity:.95; }
    @media (min-width:701px){ .pc-product-compare{ font-size:14px; } }
  </style>
</head>
<body>

  <!-- ROUNDels (sticky) -->
  <div id="sticky-roundels" aria-label="Category roundels">
    <div class="roundel-row" role="tablist" aria-label="Shop by category">



   <!-- Roundel 1 -->
      <label class="category-item" data-cat="women-topwear" role="tab" aria-selected="true">
        <input type="radio" name="cat" checked/>
        <span class="category-image-wrapper">
          <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/Group_-_2025-10-01T203008.586.webp?v=1759330830" alt="Women Topwear">
          <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        </span>
        <span class="category-label">
          <span class="label-line">Women</span>
          <span class="label-line">Topwear</span>
        </span>
      </label>



      <!-- Roundel 2 -->
      <label class="category-item" data-cat="women-bottomwear" role="tab" aria-selected="false">
        <input type="radio" name="cat" />
        <span class="category-image-wrapper">
          <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/Group_21_1dbb98c8-d1a2-47d9-bef3-b76bc051205b.webp?v=1751623815" alt="Women Bottomwear">
          <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        </span>
        <!-- ▼ updated: 2-line label -->
        <span class="category-label">
          <span class="label-line">Women</span>
          <span class="label-line">Bottomwear</span>
        </span>
      </label>


          <!-- Roundel 4 -->
      <label class="category-item" data-cat="men-topwear" role="tab" aria-selected="false">
        <input type="radio" name="cat" />
        <span class="category-image-wrapper">
          <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/Group_-_2025-10-01T203006.904.webp?v=1759330831" alt="Men Topwear">
          <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        </span>
        <span class="category-label">
          <span class="label-line">Men</span>
          <span class="label-line">Topwear</span>
        </span>
      </label>

   

      <!-- Roundel 3 -->
      <label class="category-item" data-cat="men-bottomwear" role="tab" aria-selected="false">
        <input type="radio" name="cat" />
        <span class="category-image-wrapper">
          <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/Group_87_57e1a6bf-6ae8-4a56-8cbc-f6cec1892fe9.webp?v=1756384467" alt="Men Bottomwear">
          <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        </span>
        <span class="category-label">
          <span class="label-line">Men</span>
          <span class="label-line">Bottomwear</span>
        </span>
      </label>


        <!-- Roundel 5 — Winter Wear -->
<label class="category-item" data-cat="winter-wear" role="tab" aria-selected="false">
  <input type="radio" name="cat" />
  <span class="category-image-wrapper">
    <img class="category-image" src="https://cdn.shopify.com/s/files/1/0450/3476/6485/files/new_1764416226021_805287f1-ad74-4c8c-8a93-9e19e9813e3a.webp?v=1764586391" alt="Winter Wear">
    <svg class="category-check" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="20 6 9 17 4 12" />
    </svg>
  </span>
  <span class="category-label">
    <span class="label-line">Winter</span>
    <span class="label-line">Wear</span>
  </span>
</label>

  
    </div>
  </div>


  <!-- SECTION: Women Topwear (9 cards) -->
  <div class="banner-row" id="women-topwear-banner"><span class="banner-text">Women Topwear</span></div>
  <div class="pc-grid-section">
    <div class="pc-grid-outer">
      <div class="pc-carousel" data-carousel="women-topwear">
        <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
        <div class="pc-carousel-track"></div>
        <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
      </div>
    </div>
  </div>




  <!-- SECTION: Women Bottomwear (7 cards) -->
  <div class="banner-row" id="women-bottomwear-banner"><span class="banner-text">Women Bottomwear</span></div>
  <div class="pc-grid-section">
    <div class="pc-grid-outer">
      <div class="pc-carousel" data-carousel="women-bottomwear">
        <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
        <div class="pc-carousel-track"></div>
        <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
      </div>
    </div>
  </div>


    <!-- SECTION: Men Topwear -->
  <div class="banner-row" id="men-topwear-banner"><span class="banner-text">Men Topwear</span></div>
  <div class="pc-grid-section">
    <div class="pc-grid-outer">
      <div class="pc-carousel" data-carousel="men-topwear">
        <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
        <div class="pc-carousel-track"></div>
        <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
      </div>
    </div>
  </div>


  <!-- SECTION: Men Bottomwear -->
  <div class="banner-row" id="men-bottomwear-banner"><span class="banner-text">Men Bottomwear</span></div>
  <div class="pc-grid-section">
    <div class="pc-grid-outer">
      <div class="pc-carousel" data-carousel="men-bottomwear">
        <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
        <div class="pc-carousel-track"></div>
        <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
      </div>
    </div>
  </div>



<!-- SECTION: Winter Wear – Pullover Hoodie -->
<div class="banner-row" id="pullover-hoodie-banner"><span class="banner-text">Pullover Fleece Hoodie</span></div>
<div class="pc-grid-section">
  <div class="pc-grid-outer">
    <div class="pc-carousel" data-carousel="pullover-hoodie">
      <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
      <div class="pc-carousel-track"></div>
      <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
    </div>
  </div>
</div>

<!-- SECTION: Winter Wear – Round Neck Sweatshirt -->
<div class="banner-row" id="round-neck-sweatshirt-banner"><span class="banner-text">Round Neck Sweatshirt</span></div>
<div class="pc-grid-section">
  <div class="pc-grid-outer">
    <div class="pc-carousel" data-carousel="round-neck-sweatshirt">
      <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
      <div class="pc-carousel-track"></div>
      <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
    </div>
  </div>
</div>

<!-- SECTION: Winter Wear – Zip Neck Sweatshirt -->
<div class="banner-row" id="zip-neck-sweatshirt-banner"><span class="banner-text">Zip Neck Sweatshirt</span></div>
<div class="pc-grid-section">
  <div class="pc-grid-outer">
    <div class="pc-carousel" data-carousel="zip-neck-sweatshirt">
      <button class="pc-nav-btn pc-nav-prev is-hidden" aria-label="Previous">&#10094;</button>
      <div class="pc-carousel-track"></div>
      <button class="pc-nav-btn pc-nav-next" aria-label="Next">&#10095;</button>
    </div>
  </div>
</div>




<script>



/* WINTER TAGS */
const WINTER_TAGS = {
  "pullover-hoodie": "SUPFH",
  "round-neck-sweatshirt": "SURNS",
  "zip-neck-sweatshirt": "SUZNS"
};

/* WINTER OFFER LABELS */
const WINTER_OFFER_TEXT = {
  "pullover-hoodie": "NEW LAUNCH",
  "round-neck-sweatshirt": "NEW LAUNCH",
  "zip-neck-sweatshirt": "NEW LAUNCH"
};


async function fetchWinterProducts(tag) {
  const query = `
  {
    products(first: 20, query: "tag:${tag}") {
      edges {
        node {
          title
          handle
          onlineStoreUrl
          images(first: 1) { edges { node { url } } }
          variants(first: 1) {
            edges { node { price { amount } } }
          }
        }
      }
    }
  }`;

  const response = await fetch("https://saadaa-design.myshopify.com/api/2024-07/graphql.json", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "X-Shopify-Storefront-Access-Token": "388bd37219d8ab7daee1c58a23c03cc8"
    },
    body: JSON.stringify({ query })
  });

  const json = await response.json();

  return json.data.products.edges.map(edge => {
    const p = edge.node;
    const price = parseFloat(p.variants.edges[0]?.node?.price?.amount || 0);
    return {
      title: p.title,
      link: p.onlineStoreUrl || `https://saadaa.in/products/${p.handle}`,
      image: p.images.edges[0]?.node?.url || "",
      price
    };
  });
}







function buildWinterCard(item, category){
  const offerLabel = WINTER_OFFER_TEXT[category];
  const basePrice = item.price;
  const compare = basePrice * 2;

  return `
    <a class="pc-grid-link" href="${item.link}">
      <div class="pc-grid-item">
        <div class="pc-product-image-wrapper">
          <div class="pc-offer-strip">${offerLabel}</div>
          <img src="${item.image}" loading="lazy">
        </div>
        <div class="pc-product-title">${item.title}</div>
        <div class="pc-price-row">
          <div class="pc-product-price">₹${inr.format(basePrice)}</div>
          <div class="pc-product-compare">₹${inr.format(compare)}</div>
        </div>
      </div>
    </a>
  `;
}



(async function loadWinterWear(){
  for (const [cat, tag] of Object.entries(WINTER_TAGS)) {
    const items = await fetchWinterProducts(tag);
    const track = document.querySelector(`.pc-carousel[data-carousel="${cat}"] .pc-carousel-track`);

    if (track) {
      track.innerHTML = items.map(item => 
        `<div class="pc-carousel-item">${buildWinterCard(item, cat)}</div>`
      ).join('');
    }
  }
})();






  /* ——— DATA (unchanged): fill with your products ——— */
  const DATA = {
    'women-bottomwear': [
     {link:'https://saadaa.in/products/black-solid-regular-fit-cotton-trouser', image:'https://saadaa.in/cdn/shop/files/1_3d5f7f38-fdfb-4dc9-b2e5-6d809faf345c_1.webp?v=1757741992&width=1000', title:'Everyday Cotton Pant', price:799},
      {link:'https://saadaa.in/products/women-english-blue-airy-linen-wide-leg-pant', image:'https://saadaa.in/cdn/shop/files/1_dd5f6154-d0b8-4774-a5e9-4289ba028df0.webp?v=1755861078&width=1000', title:'Airy Linen Wide Leg Pants', price:999},
      {link:'https://saadaa.in/products/rose-taupe-airy-linen-straight-pants', image:'https://saadaa.in/cdn/shop/files/1_8fe69233-839a-4637-a4c8-eb7e9774d526.webp?v=1753104766&width=1000', title:'Airy Linen Straight Pants', price:1199},
      {link:'https://saadaa.in/products/women-beige-straight-fit-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_45906f39-0ba0-4653-9809-1a3b2ac5b3c3.webp?v=1759750482&width=1000', title:'Cotton Straight Pant', price:799},
      {link:'https://saadaa.in/products/beige-wide-leg-pants-1', image:'https://saadaa.in/cdn/shop/files/1_216d766a-d9eb-4cfb-ab35-741997240c47.webp?v=1757913797&width=1000', title:'Wide Leg Pants', price:1999},
      {link:'https://saadaa.in/products/olive-green-straight-fit-formal-pants', image:'https://saadaa.in/cdn/shop/files/1_abdd4223-0dc6-4a44-8e2a-a1e250413f32.webp?v=1756454336&width=1000', title:'Straight Fit Formal Pants', price:1599},
      {link:'https://saadaa.in/products/navy-blue-viscose-palazzo-pant', image:'https://saadaa.in/cdn/shop/files/1_a8fafbd9-a1ec-4372-89fb-ef2d7c682d3d.webp?v=1757756440&width=1000', title:'Viscose Palazzo Pant', price:799},
      
    ],
    'women-topwear': [
      
      {link:'https://saadaa.in/products/maroon-airy-linen-long-kurta', image:'https://saadaa.in/cdn/shop/files/1_f00be7bb-12ae-4b25-9e40-4fef08cfcd97.webp?v=1759922095&width=1000', title:'Airy Linen Long Kurta', price:999},
      {link:'https://saadaa.in/products/women-ecru-airy-linen-mid-thigh-length-kurta', image:'https://saadaa.in/cdn/shop/files/6_0411bd68-d8b8-4b2a-bacf-023a9a93a3ec.webp?v=1759746257&width=1000', title:'Airy Linen Mid Thigh Length Kurta', price:999},
      {link:'https://saadaa.in/products/lilac-airy-linen-short-kurta', image:'https://saadaa.in/cdn/shop/files/1_6a8d46a5-0396-4efa-9438-04fd57d521fc.webp?v=1757745849&width=1000', title:'Airy Linen Short Kurta', price:799},
      {link:'https://saadaa.in/products/women-light-pink-100-linen-notch-collar-shirt', image:'https://saadaa.in/cdn/shop/files/1.1_5712a4f1-ee82-477e-acef-14583c4d2268.webp?v=1759310179&width=1000', title:'Pure Linen Notch Collar Shirts', price:2199},
      {link:'https://saadaa.in/products/women-white-airy-linen-split-neck-short-kurta', image:'https://saadaa.in/cdn/shop/files/1.1_42c6e8c0-b909-4d8e-b387-04152085cf56.webp?v=1759576985&width=1000', title:'Airy Linen Split Neck Short Kurta', price:699},
      {link:'https://saadaa.in/products/women-light-blue-100-linen-shirt', image:'https://saadaa.in/cdn/shop/files/1.2_c096de3f-a995-41ad-abec-a2fca653ae6d.webp?v=1759346577&width=1000', title:'Pure Linen Shirts', price:2499},
      {link:'https://saadaa.in/products/women-salmon-pink-airy-linen-shirt', image:'https://saadaa.in/cdn/shop/files/1_6b146cb1-2215-49ce-b25d-470f1d2f2f38.webp?v=1755860826&width=1000', title:'Airy-Linen Shirt', price:1199},
      {link:'https://saadaa.in/products/navy-blue-viscose-pleated-top', image:'https://saadaa.in/cdn/shop/files/1_e4abc390-453a-45c1-a6c4-b42b1ea4379a.webp?v=1757917562&width=1000', title:'Viscose Pleated Tops', price:1299},
      {link:'https://saadaa.in/products/rose-v-neck-sleeveless-top', image:'https://saadaa.in/cdn/shop/files/1_b2a6d7e9-99f2-4f4f-acab-54ec210cf493.webp?v=1757758235&width=1000', title:'V-Neck Sleeveless Tops', price:799},
    ],
    'men-bottomwear': [
      {link:'https://saadaa.in/products/men-white-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_a79455d6-38bc-48be-9d92-052b9a2396b0.webp?v=1756386028&width=1000', title:'White Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-black-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_910ab6fa-26d1-4e11-a1f2-634ed850de75.webp?v=1756386028&width=1000', title:'Black Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-beige-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_751a33a9-f87e-4691-8d40-fe3499583054.webp?v=1756210083&width=1000', title:'Beige Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-grey-cotton-pant', image:'https://saadaa.in/cdn/shop/files/1_f1b4a53d-88cc-4d3b-996f-f7dc74925dc9.jpg?v=1756386028&width=1000', title:'Grey Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-navy-blue-cotton-pant', image:'https://saadaa.in/cdn/shop/files/3_b20991bd-2394-4618-a2a2-39bd7bbcf7cb.webp?v=1756386028&width=1000', title:'Navy Blue Cotton Pant', price:899},
      {link:'https://saadaa.in/products/men-coffee-brown-cotton-pant', image:'https://saadaa.in/cdn/shop/files/SMCP_CB5.webp?v=1759747007&width=1000', title:'Coffee Brown Cotton Pant', price:899},
    ],
    'men-topwear': [
      {link:'https://saadaa.in/products/men-taupe-full-sleeve-linen-shirt', image:'https://saadaa.in/cdn/shop/files/1.1_f512c477-b93c-448b-8b02-a95663fd10bf.webp?v=1759309308&width=1000', title:'Pure Linen Full Sleeve Shirt', price:2499},
      {link:'https://saadaa.in/products/sky-blue-airy-linen-long-kurta-1', image:'https://saadaa.in/cdn/shop/files/1_bf5678f4-df7c-4659-be1e-91cb363717e7.webp?v=1756473416&width=1000', title:'Airy Linen Long Kurta', price:1299},
      {link:'https://saadaa.in/products/ecru-airy-linen-short-kurta-1', image:'https://saadaa.in/cdn/shop/files/1.1_7d6ccaa9-1ee0-4f82-9dea-58b4c881727e.webp?v=1756471222&width=1000', title:'Airy Linen Short Kurta', price:999},
      {link:'https://saadaa.in/products/men-light-blue-linen-half-sleeve-shirt', image:'https://saadaa.in/cdn/shop/files/1.1_3a9c5729-966c-4ce2-a758-b5f8350335f7.webp?v=1759308874&width=1000', title:'Pure Linen Short Sleeve Shirt', price:2199},
    ],
  };

  const inr = new Intl.NumberFormat('en-IN', { maximumFractionDigits: 0 });

  function escapeHtml(str = "") {
    return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");
  }

  /* Sticky offset for precise scroll-to */
  function computeStickyOffset(){
    const sticky = document.getElementById('sticky-roundels');
    const stickyH = sticky ? sticky.getBoundingClientRect().height : 0;
    const candidates = document.querySelectorAll('header, .site-header, .shopify-section-header-sticky, .announcement-bar');
    let topFixed = 0;
    candidates.forEach(el => {
      const cs = getComputedStyle(el);
      if ((cs.position === 'fixed' || cs.position === 'sticky')) {
        const rect = el.getBoundingClientRect();
        if (rect.top <= 1) topFixed += rect.height;
      }
    });
    const total = Math.round(stickyH + topFixed + 12);
    document.documentElement.style.setProperty('--sticky-offset', total + 'px');
  }
  function getStickyOffsetPx(){
    const v = getComputedStyle(document.documentElement).getPropertyValue('--sticky-offset') || '0';
    return parseInt(v, 10) || 0;
  }

 function buildCardHTML(item){
  const img = item.image || '';
  const title = escapeHtml(item.title || '');
  const priceNum = Number(item.price);
  const rupees = Number.isFinite(priceNum) ? inr.format(Math.round(priceNum)) : '';
  const compare = Number.isFinite(priceNum) ? inr.format(Math.round(priceNum * 2)) : '';
  const link = item.link || '#';
  return `
    <a class="pc-grid-link" href="${escapeHtml(link)}">
      <div class="pc-grid-item">
        <div class="pc-product-image-wrapper">
          <div class="pc-offer-strip" aria-label="Buy three, get one free">BUY 3 GET 1 FREE</div>
          <img src="${img}" alt="${title}" loading="lazy" />
        </div>
        <div class="pc-product-title">${title}</div>
        <div class="pc-price-row">
          <div class="pc-product-price">₹${rupees}</div>
          <div class="pc-product-compare">₹${compare}</div>
        </div>
      </div>
    </a>
  `;
}



  function renderCarousel(name){
    const wrapper = document.querySelector(`.pc-carousel[data-carousel="${name}"]`);
    if(!wrapper) return;
    const track = wrapper.querySelector('.pc-carousel-track');
    const items = DATA[name] || [];
    track.innerHTML = items.length
      ? items.map(buildCardHTML).map(html => `<div class="pc-carousel-item">${html}</div>`).join('')
      : `<div class="pc-grid-empty" style="width:100%;">No products yet.</div>`;
  }

  /* Smart arrow visibility */
  function attachCarouselNav(){
    document.querySelectorAll('.pc-carousel').forEach(carousel => {
      const track = carousel.querySelector('.pc-carousel-track');
      const prev = carousel.querySelector('.pc-nav-prev');
      const next = carousel.querySelector('.pc-nav-next');

      prev.classList.add('is-hidden');

      const updateArrows = () => {
        const max = Math.max(0, track.scrollWidth - track.clientWidth);
        const x = Math.round(track.scrollLeft);
        if (x > 0) prev.classList.remove('is-hidden'); else prev.classList.add('is-hidden');
        if (x >= max - 2) next.classList.add('is-hidden'); else next.classList.remove('is-hidden');
      };

      const scrollAmount = () => Math.max(track.clientWidth * 0.9, 320);

      prev.addEventListener('click', () => track.scrollBy({ left: -scrollAmount(), behavior: 'smooth' }));
      next.addEventListener('click', () => track.scrollBy({ left:  scrollAmount(), behavior: 'smooth' }));

      track.addEventListener('scroll', updateArrows, { passive: true });
      setTimeout(updateArrows, 0);
      window.addEventListener('resize', updateArrows);
    });
  }

  /* ——— Roundel behavior: scroll to section & highlight ——— */
  function scrollToCategory(cat){
    const el = document.getElementById(`${cat}-banner`);
    if(!el) return;
    const rect = el.getBoundingClientRect();
    const absoluteTop = rect.top + window.pageYOffset;
    window.scrollTo({ top: Math.max(absoluteTop - getStickyOffsetPx(), 0), behavior: 'smooth' });
  }

  function setActiveRoundel(cat){
    document.querySelectorAll('#sticky-roundels .category-item').forEach(lbl => {
      const isActive = lbl.getAttribute('data-cat') === cat;
      const radio = lbl.querySelector('input[type="radio"]');
      const selected = isActive ? 'true' : 'false';
      lbl.setAttribute('aria-selected', selected);
      if (radio) radio.checked = isActive;
    });
  }

  let manualLockUntil = 0;
  const nowMs = () => (typeof performance !== 'undefined' && performance.now) ? performance.now() : Date.now();

function onRoundelClick(e){
  const cat = e.currentTarget.getAttribute('data-cat');
  manualLockUntil = nowMs() + 800;

  let scrollTarget = cat;

  // Winter Wear → scroll to 1st winter category
  if (cat === "winter-wear") {
    scrollTarget = "pullover-hoodie";
  }

  setActiveRoundel(cat);
  scrollToCategory(scrollTarget);

  setTimeout(syncActiveOnScroll, 850);
}





  function syncActiveOnScroll(){
    if (nowMs() < manualLockUntil) return;
    const keys = [
  'women-topwear',
  'women-bottomwear',
  'men-topwear',
  'men-bottomwear',
  'pullover-hoodie',       // winter 1
  'round-neck-sweatshirt', // winter 2
  'zip-neck-sweatshirt'    // winter 3
];

    const banners = keys.map(k => document.getElementById(`${k}-banner`)).filter(Boolean);
    const offset = getStickyOffsetPx();
    const hysteresis = 6;
    const idx = banners.findIndex(h => (h.getBoundingClientRect().top - offset) > hysteresis);
    let currentIdx;
    if (idx === -1) currentIdx = banners.length - 1;
    else if (idx === 0) currentIdx = 0;
    else currentIdx = idx - 1;
    const cat = banners[currentIdx].id.replace('-banner','');
    setActiveRoundel(cat);


      if (
    cat === "pullover-hoodie" ||
    cat === "round-neck-sweatshirt" ||
    cat === "zip-neck-sweatshirt"
  ) {
    setActiveRoundel("winter-wear");
    return;
  }
  }

  document.addEventListener('DOMContentLoaded', () => {
    computeStickyOffset();

    // Render carousels
[
  'women-topwear',
  'women-bottomwear',
  'men-topwear',
  'men-bottomwear'
].forEach(renderCarousel);



    attachCarouselNav();

    // Roundel clicks
    document.querySelectorAll('#sticky-roundels .category-item').forEach(lbl => {
      lbl.addEventListener('click', onRoundelClick);
    });

    // Scroll sync
    window.addEventListener('scroll', syncActiveOnScroll, { passive: true });
    window.addEventListener('resize', () => { computeStickyOffset(); syncActiveOnScroll(); });

    syncActiveOnScroll();
  });
</script>

</body>
</html>




{% comment %} NEW CODE WITH WINTER WEAR ADDITION END {% endcomment %}
